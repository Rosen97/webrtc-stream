(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-793a2ece"],{1737:function(e,t,n){"use strict";n.r(t);var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"demo"},[n("div",{staticClass:"rtcBox"},[e._m(0),n("div",[n("video",{attrs:{src:"",id:"rtcB",controls:"",autoplay:""}}),n("h5",[e._v("B")]),n("button",{attrs:{disabled:e.allowCall},on:{click:e.call}},[e._v("call")]),n("button",{attrs:{disabled:e.allowHangup},on:{click:e.hangup}},[e._v("hangup")])])])])},a=[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("video",{attrs:{src:"",id:"rtcA",controls:"",autoplay:""}}),n("h5",[e._v("A")])])}],c=(n("96cf"),n("3b8d")),i={name:"local1",data:function(){return{peerA:null,peerB:null,offerOption:{offerToReceiveAudio:1,offerToReceiveVideo:1},allowCall:!0,allowHangup:!0}},methods:{start:function(){this.state="2",this.newRecognition.start()},stop:function(){this.state="1",this.newRecognition.stop()},call:function(){var e=Object(c["a"])(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return this.peerA&&this.peerB||this.initPeer(),e.prev=1,e.next=4,this.peerB.createOffer(this.offerOption);case 4:return t=e.sent,e.next=7,this.onCreateOffer(t);case 7:e.next=12;break;case 9:e.prev=9,e.t0=e["catch"](1),console.log("createOffer: ",e.t0);case 12:this.allowCall=!0,this.allowHangup=!1;case 14:case"end":return e.stop()}},e,this,[[1,9]])}));function t(){return e.apply(this,arguments)}return t}(),hangup:function(){this.peerA.close(),this.peerB.close(),this.peerA=null,this.peerB=null,this.allowCall=!1,this.allowHangup=!0},onCreateOffer:function(){var e=Object(c["a"])(regeneratorRuntime.mark(function e(t){var n;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.peerB.setLocalDescription(t);case 3:e.next=8;break;case 5:e.prev=5,e.t0=e["catch"](0),console.log("Offer-setLocalDescription: ",e.t0);case 8:return e.prev=8,e.next=11,this.peerA.setRemoteDescription(t);case 11:e.next=16;break;case 13:e.prev=13,e.t1=e["catch"](8),console.log("Offer-setRemoteDescription: ",e.t1);case 16:return e.prev=16,e.next=19,this.peerA.createAnswer();case 19:return n=e.sent,e.next=22,this.onCreateAnswer(n);case 22:e.next=27;break;case 24:e.prev=24,e.t2=e["catch"](16),console.log("createAnswer: ",e.t2);case 27:case"end":return e.stop()}},e,this,[[0,5],[8,13],[16,24]])}));function t(t){return e.apply(this,arguments)}return t}(),onCreateAnswer:function(){var e=Object(c["a"])(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.peerA.setLocalDescription(t);case 3:e.next=8;break;case 5:e.prev=5,e.t0=e["catch"](0),console.log("answer-setLocalDescription: ",e.t0);case 8:return e.prev=8,e.next=11,this.peerB.setRemoteDescription(t);case 11:e.next=16;break;case 13:e.prev=13,e.t1=e["catch"](8),console.log("answer-setRemoteDescription: ",e.t1);case 16:case"end":return e.stop()}},e,this,[[0,5],[8,13]])}));function t(t){return e.apply(this,arguments)}return t}(),initPeer:function(){var e=this,t=window.RTCPeerConnection||window.mozRTCPeerConnection||window.webkitRTCPeerConnection;this.peerA=new t,this.peerA.addStream(this.localstream),this.peerA.onicecandidate=function(t){t.candidate&&e.peerB.addIceCandidate(t.candidate)},this.peerB=new t,this.peerB.onaddstream=function(e){console.log("event-stream",e);var t=document.querySelector("#rtcB");t.srcObject=e.stream},this.peerB.onicecandidate=function(t){t.candidate&&e.peerA.addIceCandidate(t.candidate)},this.allowCall=!1},createMedia:function(){var e=Object(c["a"])(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,navigator.mediaDevices.getUserMedia({audio:!0,video:!0});case 2:this.localstream=e.sent,t=document.querySelector("#rtcA"),t.srcObject=this.localstream,this.initPeer();case 6:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}()},mounted:function(){var e=this;this.$nextTick(function(){e.createMedia()})}},s=i,o=(n("fc47"),n("2877")),l=Object(o["a"])(s,r,a,!1,null,null,null);t["default"]=l.exports},cd81:function(e,t,n){},fc47:function(e,t,n){"use strict";var r=n("cd81"),a=n.n(r);a.a}}]);